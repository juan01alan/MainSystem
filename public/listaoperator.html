<!DOCTYPE html>

<html class="dark" lang="pt-BR"><head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Gestor de Obras - Seleção de Perfil</title>
<script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&amp;display=swap" rel="stylesheet"/>
<link rel="stylesheet" href="./css/main.css">
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet"/>
<script>
      tailwind.config = {
        darkMode: "class",
        theme: {
          extend: {
            colors: {
              "primary": "#4B341C",
              "background": "#ffff",
            },
            fontFamily: {
              "display": ["Inter", "sans-serif"]
            },
            borderRadius: {"DEFAULT": "0.25rem", "lg": "0.5rem", "xl": "0.75rem", "full": "9999px"},
          },
        },
      }
    </script>
<style>
        body {
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
    </style>
<style>
    body {
      min-height: max(884px, 100dvh);
    }
  </style>
  </head>
<body class="bg-background-light dark:bg-background-dark font-display">
    <div class="main">

<div class="relative flex min-h-screen w-full flex-col bg-background-light dark:bg-background-dark group/design-root overflow-x-hidden">
<!-- Top App Bar -->
<div class="sticky top-0 z-10 flex items-center justify-between bg-background-light dark:bg-background-dark p-4 pb-2 border-b border-black/10">
<div class="text-black flex size-12 shrink-0 items-center justify-start">
    
</div>
<h2 class="text-zinc-900 dark:text-black text-lg font-bold leading-tight tracking-[-0.015em] flex-1 text-center">Gestor de Obras</h2>
<div class="flex size-12 shrink-0 items-center"></div>
</div>
<main class="flex-grow px-4">
<!-- Headline and Body Text -->
<h1 class="text-zinc-900 dark:text-black tracking-light text-[32px] font-bold leading-tight text-left pt-6 pb-2">Selecione seu perfil</h1>
<p class="text-zinc-600 dark:text-zinc-400 text-base font-normal leading-normal pb-3 pt-1">Toque no seu nome para acessar a obra.</p>
<!-- Search Bar -->
<div class="py-3">
<label class="flex flex-col min-w-40 h-12 w-full">
<div class="flex w-full flex-1 items-stretch rounded-lg h-full">
<div class="text-zinc-500 dark:text-zinc-400 flex border border-zinc-300 dark:border-zinc-700 bg-background-light dark:bg-zinc-800 items-center justify-center pl-4 rounded-l-lg border-r-0">
<button id="searchOperator">

  <span class="material-symbols-outlined">search</span>
</button>
</div>
<input class="form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-lg text-zinc-900 dark:text-white focus:outline-0 focus:ring-2 focus:ring-primary/50 border border-zinc-300 dark:border-zinc-700 bg-background-light dark:bg-zinc-800 focus:border-primary/50 h-full placeholder:text-zinc-500 dark:placeholder:text-zinc-400 px-4 rounded-l-none border-l-0 pl-2 text-base font-normal leading-normal" id="inputOperator" placeholder="Buscar operador por nome" value=""/>
</div>
</label>
</div>
<!-- Operator List -->
<div class="flex flex-col gap-3 py-4" id="operatorList">
<!-- List Item 1 -->


<!-- card exemplo -->
<!-- 
<div class="flex cursor-pointer items-center gap-4 rounded-lg bg-black p-3 min-h-[72px] justify-between transition-all hover:bg-neutral-900 active:bg-neutral-800"> 
  
  <div class="flex items-center gap-4">
    
    <div class="flex flex-col justify-center">
      <p class="text-white text-base font-medium leading-normal line-clamp-1">
        João da Silva
      </p>
      <p class="text-white text-sm font-normal leading-normal line-clamp-2">
        Mestre de Obras
      </p>
    </div>
  </div>
  <div class="shrink-0">
    <div class="text-white flex size-7 items-center justify-center">
      <span class="material-symbols-outlined">chevron_right</span>
    </div>
  </div>
</div>
  -->
<!-- fim card exemplo -->

<!-- Loading State -->
 
<div class="flex w-full items-center justify-center py-8 " id="loading">
<div class="flex flex-col items-center gap-4">
<svg class="animate-spin h-8 w-8 text-primary" fill="none" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
<circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
<path class="opacity-75" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z" fill="currentColor"></path>
</svg>
<p class="text-zinc-600 dark:text-zinc-400 text-sm">Carregando mais operadores...</p>
</div>
</div>
<!-- fim loading -->
</div>
</main>
</div>
    </div>
</body>
<script>
const botaoSearchOperators = document.getElementById("searchOperator");
const inputOperatorEl = document.getElementById("inputOperator");
if (botaoSearchOperators != null) {
    botaoSearchOperators.addEventListener('click', ()=>{

    filtrarComDebounce(inputOperatorEl.value);
    });
}
if (inputOperatorEl != null) {
const filtrarComDebounce = criarFiltroComDebounce();
inputOperatorEl.addEventListener('input', function(e) {
    filtrarComDebounce(e.target.value);
});
}
  /**
 * Filtra as divs da lista de operadores com base no texto do input
 * @param {string} inputValue - Valor do input de busca
 */
function filtrarOperadores(inputValue) {
    // Seleciona o container e todas as divs filhas
    const operatorList = document.getElementById('operatorList');
    const divs = operatorList.querySelectorAll(':scope > div'); // Apenas divs filhas diretas
    
    // Converte o valor do input para minúsculas e remove espaços
    const searchText = inputValue.toLowerCase().trim();
    
    divs.forEach(div => {
        // Pega o ID da div (ou qualquer atributo que identifique)
        const divId = div.id.toLowerCase();
        
        // Verifica se o ID contém todos os caracteres do texto de busca
        const contemTodosCaracteres = searchText === '' || 
            Array.from(searchText).every(char => divId.includes(char));
        
        if (!contemTodosCaracteres) {
            div.classList.add('disabled');
            div.classList.add('hidden');
            div.classList.add('pointer-events-none');
        } else {
            div.classList.remove('disabled');
            div.classList.remove('hidden');
            div.classList.remove('pointer-events-none');
        }
    });
}

/**
 * Versão alternativa que usa texto visível da div em vez do ID
 * @param {string} inputValue - Valor do input de busca
 */
function filtrarOperadoresPorTexto(inputValue) {
    const operatorList = document.getElementById('operatorList');
    const divs = operatorList.querySelectorAll(':scope > div');
    const searchText = inputValue.toLowerCase().trim();
    
    divs.forEach(div => {
        // Pega o texto visível da div (incluindo filhos)
        const divText = div.textContent.toLowerCase();
        
        const contemTodosCaracteres = searchText === '' || 
            Array.from(searchText).every(char => divText.includes(char));
        
        if (!contemTodosCaracteres) {
            div.classList.add('disabled');
        } else {
            div.classList.remove('disabled');
        }
    });
}

/**
 * Versão com debounce para melhor performance em inputs em tempo real
 */
function criarFiltroComDebounce() {
    let timeoutId;
    
    return function(inputValue) {
        clearTimeout(timeoutId);
        timeoutId = setTimeout(() => {
            filtrarOperadores(inputValue);
        }, 300); // Aguarda 300ms após parar de digitar
    };
}
</script>
<script src="./javascript/main.js"></script>
<script type="module" src="./javascript/firebase.mjs"></script>
<script src="./javascript/backEndHandle.mjs" type="module"></script></html>
<!DOCTYPE html>
<html class="light" lang="pt-br">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Feedbacks da Obra</title>
<script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
<link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;700;800&amp;display=swap" rel="stylesheet"/>
<link rel="stylesheet" href="./css/main.css">
<link rel="stylesheet" href="./css/feedbackgeral.css">
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&amp;display=swap" rel="stylesheet"/>
<script id="tailwind-config">
  tailwind.config = {
    darkMode: "class",
    theme: {
      extend: {
        colors: {
          "primary": "#4B341C",
          "secondary": "#6D4C2E",
          "accent": "#8B7355",
          "background": "#f8f7f6",
          "background-dark": "#1a1a1a",
          "card-light": "#ffffff",
          "card-dark": "#2d2d2d",
        },
        fontFamily: {
          "display": ["Manrope", "sans-serif"]
        },
        borderRadius: {"DEFAULT": "0.75rem", "lg": "1rem", "xl": "1.25rem", "full": "9999px"},
      },
    },
  }
</script>
<style>
  .material-symbols-outlined {
    font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 24;
  }
  body {
    min-height: 100vh;
  }
  
  /* Scrollbar personalizada */
  ::-webkit-scrollbar {
    width: 8px;
  }
  ::-webkit-scrollbar-track {
    background: #f1f1f1;
    border-radius: 4px;
  }
  ::-webkit-scrollbar-thumb {
    background: #4B341C;
    border-radius: 4px;
  }
  .dark ::-webkit-scrollbar-track {
    background: #2d2d2d;
  }
  .dark ::-webkit-scrollbar-thumb {
    background: #6D4C2E;
  }
  
  /* Animações */
  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
  }
  .fade-in {
    animation: fadeIn 0.3s ease-out;
  }
</style>
</head>
<body class="bg-background-light dark:bg-background-dark font-display transition-colors duration-200">
<div class="min-h-screen flex flex-col">
  
  <!-- Header com botão voltar -->
  <header class="sticky top-0 z-10 bg-background-light/90 dark:bg-background-dark/90 backdrop-blur-sm border-b border-primary/10 dark:border-white/10">
    <div class="container mx-auto px-4 py-4">
      <div class="flex items-center gap-4">

        <div class="flex-1 text-center">
          <h1 id="obraTitle" class="text-2xl font-bold text-primary dark:text-white truncate">Carregando...</h1>
          <p id="obraSubtitle" class="text-sm text-gray-600 dark:text-gray-400 mt-1"></p>
        </div>
        
      </div>
    </div>
  </header>

  <!-- Estatísticas -->
  <div id="statsContainer" class="container mx-auto px-4 py-6 hidden">
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
      <div class="bg-card-light dark:bg-card-dark rounded-xl p-4 shadow-sm border border-primary/10">
        <div class="flex items-center justify-between">
          <div>
            <p class="text-sm text-gray-600 dark:text-gray-400">Total Feedbacks</p>
            <p id="totalFeedbacks" class="text-2xl font-bold text-primary dark:text-white">0</p>
          </div>
          <span class="material-symbols-outlined text-primary/50 dark:text-white/50 text-3xl">reviews</span>
        </div>
      </div>
      
      <div class="bg-card-light dark:bg-card-dark rounded-xl p-4 shadow-sm border border-primary/10">
        <div class="flex items-center justify-between">
          <div>
            <p class="text-sm text-gray-600 dark:text-gray-400">Média Geral</p>
            <div class="flex items-center gap-2">
              <p id="averageRating" class="text-2xl font-bold text-primary dark:text-white">0.0</p>
              <div id="ratingStars" class="flex"></div>
            </div>
          </div>
          <span class="material-symbols-outlined text-primary/50 dark:text-white/50 text-3xl">star</span>
        </div>
      </div>
      
      <div class="bg-card-light dark:bg-card-dark rounded-xl p-4 shadow-sm border border-primary/10">
        <div class="flex items-center justify-between">
          <div>
            <p class="text-sm text-gray-600 dark:text-gray-400">Positivos</p>
            <p id="positiveFeedbacks" class="text-2xl font-bold text-green-600 dark:text-green-400">0</p>
          </div>
          <span class="material-symbols-outlined text-green-500/50 text-3xl">thumb_up</span>
        </div>
      </div>
      
      <div class="bg-card-light dark:bg-card-dark rounded-xl p-4 shadow-sm border border-primary/10">
        <div class="flex items-center justify-between">
          <div>
            <p class="text-sm text-gray-600 dark:text-gray-400">Último Feedback</p>
            <p id="lastFeedbackDate" class="text-lg font-medium text-primary dark:text-white">-</p>
          </div>
          <span class="material-symbols-outlined text-primary/50 dark:text-white/50 text-3xl">schedule</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Filtros -->
  <div class="container mx-auto px-4 py-4">
    <div class="flex flex-col sm:flex-row gap-4 items-center justify-between">
      <div class="flex-1 w-full">
        <div class="relative">
          <span class="material-symbols-outlined absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400">
            search
          </span>
          <input type="text" 
                 id="searchFeedback" 
                 placeholder="Buscar nos feedbacks..."  
                 class="w-full pl-10 pr-4 py-3 bg-card-light dark:bg-card-dark border border-primary/20 dark:border-white/20 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-transparent text-gray-800 dark:text-white">
        </div>
      </div>
      
    </div>
  </div>

  <!-- Container principal dos feedbacks -->
  <main class="flex-1 container mx-auto px-4 pb-8">
    <div id="loadingContainer" class="flex flex-col items-center justify-center py-12">
      <div class="animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary mb-4"></div>
      <p class="text-gray-600 dark:text-gray-400">Carregando feedbacks...</p>
    </div>
    
    <div id="emptyContainer" class="hidden flex-col items-center justify-center py-12 text-center">
      <span class="material-symbols-outlined text-6xl text-gray-400 dark:text-gray-600 mb-4">
        sentiment_dissatisfied
      </span>
      <h3 class="text-xl font-bold text-gray-700 dark:text-gray-300 mb-2">Nenhum feedback encontrado</h3>
      <p class="text-gray-600 dark:text-gray-400 max-w-md">Esta obra ainda não possui feedbacks registrados.</p>
    </div>
    
    <div id="feedbacksContainer" class="grid grid-cols-1 lg:grid-cols-2 gap-6 hidden">
      <!-- Os feedbacks serão inseridos aqui dinamicamente -->
    </div>
  </main>

</div>
<script type="module" src="../public/javascript/feedBacksAllPage.mjs"></script>
<style>
  @media print {
    header, #statsContainer, #searchFeedback, #filterRating, #filterDate, #exportBtn {
      display: none !important;
    }
    
    body {
      background: white !important;
      color: black !important;
    }
    
    #feedbacksContainer {
      display: block !important;
    }
    
    #feedbacksContainer > div {
      break-inside: avoid;
      margin-bottom: 20px;
      border: 1px solid #ddd !important;
      box-shadow: none !important;
    }
  }
</style>
</body>
</html>